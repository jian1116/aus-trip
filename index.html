<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Jian & Eunseol in AUS âœˆï¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0b1020">
  <link rel="manifest" href="manifest.webmanifest">

  <style>
    :root {
      --bg: #0b1020;
      --card: rgba(24, 30, 60, 0.9);
      --accent: #8fe4ff;
      --accent2: #ffc8ff;
      --text: #f7f8ff;
      --muted: #a8b0d8;
      --danger: #ff8b8b;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at 10% 20%, #242c5a 0, #0b1020 50%, #050713 100%);
      color: var(--text);
      padding: 16px;
      position: relative;
      overflow-x: hidden;
    }

    /* ë³„ + ë°©ìš¸ ë°°ê²½ */
    body::before,
    body::after {
      content: "";
      position: fixed;
      inset: -50%;
      background-image:
        radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.15) 0, transparent 40%),
        radial-gradient(circle at 80% 10%, rgba(143, 228, 255, 0.2) 0, transparent 45%),
        radial-gradient(circle at 30% 80%, rgba(255, 200, 255, 0.15) 0, transparent 40%);
      opacity: 0.2;
      z-index: -2;
    }

    .star {
      position: fixed;
      width: 2px;
      height: 2px;
      border-radius: 999px;
      background: white;
      opacity: 0.5;
      animation: twinkle 4s ease-in-out infinite;
    }

    .star:nth-child(1) { top: 10%; left: 20%; }
    .star:nth-child(2) { top: 30%; left: 80%; animation-delay: 1s; }
    .star:nth-child(3) { top: 60%; left: 15%; animation-delay: 2s; }
    .star:nth-child(4) { top: 80%; left: 70%; animation-delay: 3s; }

    @keyframes twinkle {
      0%, 100% { opacity: 0.2; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.6); }
    }

    header {
      max-width: 1040px;
      margin: 0 auto 16px;
      text-align: center;
    }

    header h1 {
      font-size: 1.8rem;
      font-weight: 700;
      letter-spacing: 0.03em;
      margin-bottom: 4px;
    }

    header p {
      font-size: 0.9rem;
      color: var(--muted);
    }

    .chip-row {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
      font-size: 0.8rem;
    }

    .chip {
      padding: 4px 10px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(143, 228, 255, 0.15), rgba(255, 200, 255, 0.15));
      border: 1px solid rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(12px);
    }

    nav {
      max-width: 1040px;
      margin: 12px auto 18px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
    }

    nav button {
      flex: 1 1 130px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(15, 16, 40, 0.9);
      color: var(--text);
      padding: 8px 12px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    nav button.active {
      background: linear-gradient(90deg, #8fe4ff, #ffc8ff);
      color: #11111f;
      font-weight: 600;
      box-shadow: 0 0 14px rgba(143, 228, 255, 0.6);
    }

    nav button:hover:not(.active) {
      transform: translateY(-1px);
      box-shadow: 0 3px 10px rgba(0,0,0,0.35);
    }

    main {
      max-width: 1040px;
      margin: 0 auto 40px;
    }

    section {
      display: none;
      animation: fadeIn 0.25s ease-out;
    }

    section.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(4px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .card {
      background: var(--card);
      border-radius: 18px;
      padding: 14px 14px 16px;
      box-shadow: 0 18px 45px rgba(0,0,0,0.5);
      border: 1px solid rgba(143, 228, 255, 0.18);
      backdrop-filter: blur(16px);
      margin-bottom: 14px;
    }

    .card-title-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
    }

    .card h2 {
      font-size: 1rem;
    }

    .badge {
      font-size: 0.7rem;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(143, 228, 255, 0.2);
      color: var(--accent);
    }

    .card p.desc {
      font-size: 0.82rem;
      color: var(--muted);
      margin-bottom: 10px;
    }

    label {
      font-size: 0.78rem;
      display: block;
      margin-bottom: 4px;
      color: var(--muted);
    }

    input[type="text"],
    input[type="date"],
    input[type="url"],
    textarea {
      width: 100%;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.25);
      background: rgba(8, 9, 24, 0.9);
      padding: 8px 10px;
      color: var(--text);
      font-size: 0.82rem;
      outline: none;
      margin-bottom: 8px;
    }

    textarea {
      resize: vertical;
      min-height: 80px;
      max-height: 200px;
    }

    input::placeholder,
    textarea::placeholder {
      color: rgba(180, 190, 230, 0.7);
    }

    input[type="file"] {
      font-size: 0.78rem;
      color: var(--muted);
      margin: 4px 0 8px;
    }

    .char-counter {
      font-size: 0.7rem;
      text-align: right;
      color: var(--muted);
      margin-top: -4px;
      margin-bottom: 6px;
    }

    .btn-row {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
      margin-top: 4px;
    }

    .btn {
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.15);
      padding: 6px 12px;
      font-size: 0.8rem;
      cursor: pointer;
      background: rgba(15, 16, 40, 0.95);
      color: var(--text);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .btn-primary {
      background: linear-gradient(90deg, #8fe4ff, #ffc8ff);
      color: #101021;
      font-weight: 600;
    }

    .btn-ghost {
      background: transparent;
    }

    .btn-danger {
      border-color: rgba(255, 139, 139, 0.8);
      color: var(--danger);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: default;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border-radius: 999px;
      padding: 4px 8px;
      font-size: 0.75rem;
      background: rgba(0,0,0,0.28);
      border: 1px solid rgba(255,255,255,0.15);
      color: var(--muted);
    }

    .pill-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--accent2);
    }

    .grid {
      display: grid;
      gap: 10px;
    }

    @media (min-width: 720px) {
      .grid-2 {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
      .grid-3 {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    .journal-list {
      margin-top: 10px;
      display: grid;
      gap: 8px;
    }

    .journal-item {
      border-radius: 14px;
      background: rgba(9, 10, 30, 0.9);
      padding: 10px;
      border: 1px solid rgba(143, 228, 255, 0.15);
      font-size: 0.8rem;
    }

    .journal-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 4px;
    }

    .journal-date {
      font-weight: 600;
      font-size: 0.85rem;
    }

    .journal-tag {
      font-size: 0.7rem;
      color: var(--muted);
    }

    .journal-photos {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
    }

    .journal-photos img {
      width: 72px;
      height: 72px;
      object-fit: cover;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.15);
    }

    .checklist-list {
      display: grid;
      gap: 8px;
      margin-top: 8px;
    }

    .check-item {
      border-radius: 14px;
      padding: 8px 10px;
      background: rgba(9, 10, 30, 0.9);
      border: 1px solid rgba(255,255,255,0.16);
      font-size: 0.8rem;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .check-top-row {
      display: flex;
      justify-content: space-between;
      gap: 6px;
      align-items: center;
    }

    .check-name {
      font-weight: 600;
      font-size: 0.85rem;
    }

    .check-link {
      font-size: 0.75rem;
      color: var(--accent);
      text-decoration: none;
      word-break: break-all;
    }

    .check-bottom-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 2px;
    }

    .check-bottom-row label {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      margin: 0;
      font-size: 0.78rem;
      cursor: pointer;
      color: var(--muted);
    }

    .visit-log {
      margin-top: 10px;
      font-size: 0.78rem;
      color: var(--muted);
    }

    .visit-log-group {
      margin-top: 4px;
    }

    .visit-log-group strong {
      font-size: 0.78rem;
    }

    .visit-log-list {
      margin-top: 2px;
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
    }

    .visit-log-pill {
      padding: 2px 6px;
      border-radius: 999px;
      background: rgba(8, 9, 24, 0.9);
      border: 1px solid rgba(143, 228, 255, 0.2);
    }

    .toganjip-list {
      margin-top: 10px;
      display: grid;
      gap: 10px;
    }

    .toganjip-card {
      border-radius: 16px;
      padding: 10px;
      background: rgba(9, 10, 30, 0.94);
      border: 1px solid rgba(255,255,255,0.18);
      font-size: 0.8rem;
    }

    .toganjip-photos {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 6px;
      margin: 6px 0;
    }

    .toganjip-photos img {
      width: 100%;
      border-radius: 12px;
      height: 110px;
      object-fit: cover;
      border: 1px solid rgba(255,255,255,0.2);
    }

    .toganjip-label {
      font-size: 0.7rem;
      text-align: center;
      color: var(--muted);
      margin-top: 2px;
    }

    .chat-columns {
      display: grid;
      gap: 10px;
    }

    @media (min-width: 720px) {
      .chat-columns {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .chat-log {
      margin-top: 8px;
      max-height: 260px;
      overflow-y: auto;
      padding-right: 4px;
    }

    .chat-bubble {
      border-radius: 14px;
      padding: 6px 8px;
      background: rgba(9, 10, 30, 0.9);
      border: 1px solid rgba(143, 228, 255, 0.18);
      font-size: 0.78rem;
      margin-bottom: 6px;
    }

    .chat-meta {
      font-size: 0.68rem;
      color: var(--muted);
      margin-bottom: 1px;
    }

    .weather-row {
      display: grid;
      gap: 10px;
    }

    @media (min-width: 640px) {
      .weather-row {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .weather-card {
      border-radius: 16px;
      padding: 10px 12px;
      background: radial-gradient(circle at top left, rgba(143, 228, 255, 0.35), rgba(5, 7, 20, 0.98));
      border: 1px solid rgba(255,255,255,0.2);
      font-size: 0.86rem;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .weather-title {
      font-weight: 600;
      display: flex;
      justify-content: space-between;
    }

    .weather-temp {
      font-size: 1.2rem;
      font-weight: 700;
      margin-top: 2px;
    }

    .small {
      font-size: 0.74rem;
      color: var(--muted);
    }

    footer {
      max-width: 1040px;
      margin: 0 auto;
      text-align: center;
      font-size: 0.7rem;
      color: var(--muted);
      opacity: 0.7;
      padding-bottom: 16px;
    }
    /* === ëª¨ë°”ì¼ ìµœì í™” ì¶”ê°€ === */
    @media (max-width: 480px) {
      body {
        padding: 12px;
        padding-bottom: 84px; /* ì•„ë˜ ë„¤ë¹„ë°” ë“¤ì–´ê°ˆ ìë¦¬ */
      }

      header h1 {
        font-size: 1.4rem;
      }

      header p {
        font-size: 0.8rem;
      }

      .card {
        padding: 10px 12px;
        border-radius: 14px;
      }

      nav button {
        font-size: 0.78rem;
        padding: 7px 10px;
      }

      .journal-photos img {
        width: 100%;
        height: auto;
      }
    }

    /* ëª¨ë°”ì¼ì—ì„œ ë„¤ë¹„ê²Œì´ì…˜ì„ í•˜ë‹¨ ê³ ì •ë°”ì²˜ëŸ¼ */
    @media (max-width: 600px) {
      nav {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(10, 12, 30, 0.95);
        backdrop-filter: blur(10px);
        padding: 8px;
        border-top: 1px solid rgba(255,255,255,0.15);
        z-index: 9999;
      }
    }
    
  </style>
</head>
<body>
  <!-- ë°°ê²½ìš© ì‘ì€ ë³„ë“¤ -->
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>

  <header>
    <h1>âœ¨ Jian & Eunseol in AUS âœˆï¸</h1>
    <p> ì—¬í–‰ ì¼ê¸° â€¢ ì²´í¬ë¦¬ìŠ¤íŠ¸ â€¢ ì„¤ìŸŒë˜ê°„ì§‘ â€¢ í™€ë¡œ ê¸°ë¡ì¥</p>
    <div class="chip-row">
      <div class="chip">2026-01-16 ~ 2026-02-01</div>
      <div class="chip">ì¶œë°œ D-Day: 2026-01-20</div>
      <div class="chip">ì„¤ì´ë‘ ìŸˆë‹ˆì˜ ë‘ ë²ˆì§¸ í˜¸ì£¼ ì—¬í–‰ ğŸŒ™</div>
    </div>
  </header>

  <nav>
    <button data-target="home" class="active">Home</button>
    <button data-target="journal">ì¼ì¼ ê¸°ë¡ì¥</button>
    <button data-target="checklist">ì²´í¬ë¦¬ìŠ¤íŠ¸</button>
    <button data-target="toganjip">ë˜ê°„ì§‘</button>
    <button data-target="chat">ê¸°ë¶„ ê¸°ë¡ì§±</button>
  </nav>

  <main>
    <!-- HOME -->
    <section id="home" class="active">
      <div class="card">
        <div class="card-title-row">
          <h2>ì˜¤ëŠ˜ì˜ ë©œë²„ë¥¸ & í˜¸ì£¼ ë‚ ì”¨</h2>
          <span class="badge">weather</span>
        </div>
        <p class="desc">ì œê°€apiì—°ê²°ì€ì•ˆí•´ë´£ì–´ìš”ìš”</p>
        <div class="weather-row">
          <div class="weather-card" id="weather-mel">
            <div class="weather-title">
              <span>Melbourne</span>
              <span class="small" id="weather-mel-updated">-</span>
            </div>
            <div class="weather-temp" id="weather-mel-temp">22Â°C</div>
            <div class="small" id="weather-mel-desc">ë§‘ê³  ì‚´ì§ ì„ ì„ í•œ ì €ë…</div>
          </div>
          <div class="weather-card" id="weather-aus">
            <div class="weather-title">
              <span>Australia (Trip mood)</span>
              <span class="small" id="weather-aus-updated">-</span>
            </div>
            <div class="weather-temp" id="weather-aus-temp">26Â°C</div>
            <div class="small" id="weather-aus-desc">í•´ ì¨ì¨, ì—¬í–‰í•˜ê¸° ë”± ì¢‹ì€ ë‚ ì”¨</div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-title-row">
          <h2>ì—¬í–‰ ì¹´ìš´íŠ¸ë‹¤ìš´</h2>
          <span class="badge">countdown</span>
        </div>
        <p class="desc">ì¶œë°œ ì „ ì„¤ë ˆëŠ” ê¸°ê°„ê¹Œì§€ ê¸°ë¡í•  ìˆ˜ ìˆì–´. 1ì›” 16ì¼ë¶€í„° ì—¬í–‰ ëë‚˜ëŠ” 2ì›” 1ì¼ê¹Œì§€ê°€ ìš°ë¦¬ ë‘˜ë§Œì˜ íƒ€ì„ë¼ì¸ ğŸ“…</p>
        <div class="grid grid-3">
          <div class="journal-item">
            <div class="journal-header">
              <span class="journal-date">ì¶œë°œê¹Œì§€ D-<span id="d-day"></span></span>
            </div>
            <div class="journal-body small">2026-01-20 ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°í•´.</div>
          </div>
          <div class="journal-item">
            <div class="journal-header">
              <span class="journal-date">ì „ì²´ ì—¬í–‰</span>
            </div>
            <div class="journal-body small">2026-01-16 ~ 02-01, ì´ <span id="total-days"></span>ì¼ ê¸°ë¡ ê°€ëŠ¥</div>
          </div>
          <div class="journal-item">
            <div class="journal-header">
              <span class="journal-date">ì˜¤ëŠ˜ ìƒíƒœ</span>
            </div>
            <div class="journal-body small">ì˜¤ëŠ˜ì´ ì € ë²”ìœ„ ì•ˆì´ë©´, ì¼ì¼ê¸°ë¡ì¥ì— ë°”ë¡œ ì“¸ ìˆ˜ ìˆì–´ âœï¸</div>
          </div>
        </div>
      </div>
    </section>

    <!-- JOURNAL -->
    <section id="journal">
      <div class="card">
        <div class="card-title-row">
          <h2>ì¼ì¼ ê¸°ë¡ì¥ ğŸ“–</h2>
          <span class="badge">500ì / ì‚¬ì§„ 3ì¥</span>
        </div>
        <p class="desc">2026-01-16 ~ 02-01 ì‚¬ì´ ë‚ ì§œë§Œ ê¸°ë¡ ê°€ëŠ¥í•´. ì—¬í–‰ ì „ ì„¤ë ˜ë„, ë©œë²„ë¥¸ì—ì„œì˜ í•˜ë£¨ë„ ì»´íŒ©íŠ¸í•˜ê²Œ ë‹´ì!</p>

        <div class="grid grid-2">
          <div>
            <label for="journal-date">ë‚ ì§œ</label>
            <input type="date" id="journal-date"
                   min="2026-01-16" max="2026-02-01">
          </div>
        </div>

        <label for="journal-text">ì˜¤ëŠ˜ì˜ ê¸°ë¡</label>
        <textarea id="journal-text" maxlength="500"
                  placeholder="ìµœëŒ€ 500ìê¹Œì§€! ì˜¤ëŠ˜ì˜ ìˆœê°„ì„ ì§§ê²Œ ë‚¨ê²¨ë³´ì :)"></textarea>
        <div class="char-counter"><span id="journal-count">0</span> / 500</div>

        <label for="journal-photos">ì‚¬ì§„ (ìµœëŒ€ 3ì¥)</label>
        <input type="file" id="journal-photos" accept="image/*" multiple>
        <div class="small">3ì¥ê¹Œì§€ ì €ì¥ë¼. 4ì¥ ì´ìƒ ì„ íƒí•˜ë©´ ì•ì—ì„œ 3ì¥ë§Œ ì‚¬ìš©ë¼.</div>

        <div class="btn-row">
          <button class="btn btn-ghost" id="journal-clear">ì…ë ¥ ì´ˆê¸°í™”</button>
          <button class="btn btn-primary" id="journal-save">ê¸°ë¡ ì €ì¥í•˜ê¸°</button>
        </div>
      </div>

      <div class="card">
        <div class="card-title-row">
          <h2>íƒ€ì„ë¼ì¸</h2>
          <span class="badge">ë‚ ì§œë³„ë¡œ ë³´ê¸°</span>
        </div>
        <div id="journal-list" class="journal-list small">
          <!-- JSê°€ ì¼ê¸° ì¹´ë“œ ì±„ì›€ -->
        </div>
      </div>
    </section>

    <!-- CHECKLIST -->
    <section id="checklist">
      <div class="card">
        <div class="card-title-row">
          <h2>ê°€ê³  ì‹¶ì€ ì¥ì†Œ ì²´í¬ë¦¬ìŠ¤íŠ¸ ğŸ“</h2>
          <span class="badge">Google Maps ë§í¬</span>
        </div>
        <p class="desc">ê°€ë³´ê³  ì‹¶ì€ ê³³ì˜ ì´ë¦„ê³¼ êµ¬ê¸€ë§µ ë§í¬ë¥¼ ë„£ìœ¼ë©´, ë¦¬ìŠ¤íŠ¸ë¡œ ìŒ“ì—¬. ì´ë¦„ì„ ëˆ„ë¥´ë©´ ë°”ë¡œ ìƒˆ íƒ­ì—ì„œ êµ¬ê¸€ë§µì´ ì—´ë ¤!</p>

        <label for="place-name">ì¥ì†Œ ì´ë¦„</label>
        <input type="text" id="place-name" placeholder="ì˜ˆ: Higher Ground, Hosier Lane" />

        <label for="place-url">êµ¬ê¸€ë§µ ë§í¬</label>
        <input type="url" id="place-url" placeholder="https://maps.google.com/..." />

        <div class="btn-row">
          <button class="btn btn-primary" id="place-add">ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€</button>
        </div>
      </div>

      <div class="card">
        <div class="card-title-row">
          <h2>ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>
          <span class="badge">âœ… visited</span>
        </div>
        <div id="checklist-list" class="checklist-list small"></div>
        <div id="visit-log" class="visit-log"></div>
      </div>
    </section>

    <!-- TOGANJIP -->
    <section id="toganjip">
      <div class="card">
        <div class="card-title-row">
          <h2>ë˜ê°„ì§‘ ê¸°ë¡ ğŸ“</h2>
          <span class="badge">Before & After</span>
        </div>
        <p class="desc">ì´ë¯¸ í•œ ë²ˆ ê°”ë‹¤ê°€ ë˜ ê°€ëŠ” ì¥ì†Œë¼ë©´, 2024ë…„ ì‚¬ì§„ / ì´ë²ˆ ì—¬í–‰ ì‚¬ì§„ ë‘ ì¥ê³¼ ì§§ì€ í›„ê¸°ë¥¼ ë‚¨ê²¨ì„œ â€œìš°ë¦¬ë§Œì˜ ë˜ê°„ì§‘ ì¹´ë“œâ€ë¥¼ ë§Œë“¤ì.</p>

        <label for="tog-name">ì¥ì†Œ ì´ë¦„</label>
        <input type="text" id="tog-name" placeholder="ì˜ˆ: Higher Ground, Victoria Market" />

        <label for="tog-photo1">ì²« ë°©ë¬¸ ì‚¬ì§„ (ì˜ˆ: 2024ë…„)</label>
        <input type="file" id="tog-photo1" accept="image/*">

        <label for="tog-photo2">ì´ë²ˆ ì—¬í–‰ ì‚¬ì§„</label>
        <input type="file" id="tog-photo2" accept="image/*">

        <label for="tog-note">ë˜ ë°©ë¬¸í•œ í›„ê¸°</label>
        <textarea id="tog-note" maxlength="400"
                  placeholder="ê°„ë‹¨í•˜ê²Œ, ì™œ ë˜ ê°”ëŠ”ì§€ / ë­ê°€ ë‹¬ëëŠ”ì§€ ì ì–´ì¤˜ (400ì ì´ë‚´)"></textarea>
        <div class="char-counter"><span id="tog-count">0</span> / 400</div>

        <div class="btn-row">
          <button class="btn btn-primary" id="tog-save">ë˜ê°„ì§‘ ì¹´ë“œ ë§Œë“¤ê¸°</button>
        </div>
      </div>

      <div class="card">
        <div class="card-title-row">
          <h2>ìš°ë¦¬ë§Œì˜ ë˜ê°„ì§‘ ëª¨ìŒ</h2>
          <span class="badge">memoboard</span>
        </div>
        <div id="tog-list" class="toganjip-list"></div>
      </div>
    </section>

    <!-- CHAT -->
    <section id="chat">
      <div class="card">
        <div class="card-title-row">
          <h2>ì¦‰ì„ ê¸°ë¶„ ì±„íŒ…ë°© ğŸ’¬</h2>
          <span class="badge">50ì ì œí•œ</span>
        </div>
        <p class="desc">ê·¸ë•Œê·¸ë•Œ ë– ì˜¤ë¥´ëŠ” ê°ì •ì„ ì§§ê²Œ ë˜ì ¸ë‘ëŠ” ê³µê°„. ê°ì ê¸°ë¡ì¥ì´ ë”°ë¡œ ìˆì–´ì„œ ì„œë¡œ ê¸°ë¶„ë„ êµ¬ê²½í•  ìˆ˜ ìˆì–´!</p>
        <p class="desc small">ìœ„ì¹˜ ê¶Œí•œì„ í—ˆìš©í•´ ì£¼ë©´, ëŒ€ëµì ì¸ ìœ„ì¹˜ë„ ê°™ì´ ì €ì¥ë¼. (í—ˆìš© ì•ˆ í•´ë„ ê´œì°®ì•„!)</p>
      </div>

      <div class="chat-columns">
        <!-- ì§€ì•ˆ -->
        <div class="card">
          <div class="card-title-row">
            <h2>ì§€ì•ˆì´ ê¸°ë¡ì¥</h2>
            <span class="badge">Tori</span>
          </div>
          <label for="chat-jian-input">ì§€ê¸ˆ ê¸°ë¶„ í•œ ì¤„</label>
          <textarea id="chat-jian-input" maxlength="50"
                    placeholder="50ì ì´ë‚´ë¡œë§Œ!"></textarea>
          <div class="char-counter"><span id="chat-jian-count">0</span> / 50</div>
          <div class="btn-row">
            <button class="btn btn-primary" id="chat-jian-send">ë‚¨ê¸°ê¸°</button>
          </div>
          <div id="chat-jian-log" class="chat-log"></div>
        </div>

        <!-- ì€ì„¤ -->
        <div class="card">
          <div class="card-title-row">
            <h2>ì€ì„¤ì´ ê¸°ë¡ì¥</h2>
            <span class="badge">Eunseol</span>
          </div>
          <label for="chat-eun-input">ì§€ê¸ˆ ê¸°ë¶„ í•œ ì¤„</label>
          <textarea id="chat-eun-input" maxlength="50"
                    placeholder="50ì ì´ë‚´ë¡œë§Œ!"></textarea>
          <div class="char-counter"><span id="chat-eun-count">0</span> / 50</div>
          <div class="btn-row">
            <button class="btn btn-primary" id="chat-eun-send">ë‚¨ê¸°ê¸°</button>
          </div>
          <div id="chat-eun-log" class="chat-log"></div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    ë§Œë“  ì‚¬ëŒ: jian â€¢ ëª¨ë“  ë°ì´í„°ëŠ” ì´ ë¸Œë¼ìš°ì €ì—ë§Œ ì €ì¥ã…‹ ğŸŒ™
  </footer>

  <script>
     // === PWA: service worker ë“±ë¡ ===
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./sw.js').catch(console.error);
    });
  }
    // ===== ê¸°ë³¸ ë„ìš°ë¯¸ =====
    const STORAGE_PREFIX = 'tori-aus-2026-';

    function loadData(key, fallback) {
      try {
        const raw = localStorage.getItem(STORAGE_PREFIX + key);
        return raw ? JSON.parse(raw) : fallback;
      } catch (e) {
        console.error('load error', key, e);
        return fallback;
      }
    }

    function saveData(key, value) {
      localStorage.setItem(STORAGE_PREFIX + key, JSON.stringify(value));
    }

    function formatDate(date) {
      const y = date.getFullYear();
      const m = String(date.getMonth() + 1).padStart(2, '0');
      const d = String(date.getDate()).padStart(2, '0');
      return `${y}-${m}-${d}`;
    }

    function todayString() {
      return formatDate(new Date());
    }

    // ===== ë„¤ë¹„ê²Œì´ì…˜ =====
    const navButtons = document.querySelectorAll('nav button');
    const sections = document.querySelectorAll('main section');

    navButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        navButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const target = btn.dataset.target;
        sections.forEach(sec => {
          sec.classList.toggle('active', sec.id === target);
        });
      });
    });

    // ===== Home: ì¹´ìš´íŠ¸ë‹¤ìš´ & ë‚ ì”¨ ì˜ˆì‹œ =====
    const dDaySpan = document.getElementById('d-day');
    const totalDaysSpan = document.getElementById('total-days');

    (function setupHome() {
      const departure = new Date('2026-01-20');
      const now = new Date();
      const diffMs = departure - now;
      const dDay = Math.ceil(diffMs / (1000 * 60 * 60 * 24));
      dDaySpan.textContent = dDay > 0 ? dDay : 0;

      const start = new Date('2026-01-16');
      const end = new Date('2026-02-01');
      const total = (end - start) / (1000 * 60 * 60 * 24) + 1;
      totalDaysSpan.textContent = total;

      const today = todayString();
      const melUpdated = document.getElementById('weather-mel-updated');
      const ausUpdated = document.getElementById('weather-aus-updated');
      melUpdated.textContent = today;
      ausUpdated.textContent = today;
    })();

    // ë‚ ì”¨ API ì—°ê²° ìë¦¬: í•„ìš”í•˜ë©´ ì´ í•¨ìˆ˜ ì•ˆì— fetch ì¶”ê°€
    async function fetchWeatherExample() {
      // ì˜ˆì‹œ:
      // const apiKey = 'YOUR_API_KEY';
      // const url = `https://api.openweathermap.org/data/2.5/weather?q=Melbourne,AU&units=metric&lang=kr&appid=${apiKey}`;
      // const res = await fetch(url);
      // const data = await res.json();
      // document.getElementById('weather-mel-temp').textContent = Math.round(data.main.temp) + 'Â°C';
      // document.getElementById('weather-mel-desc').textContent = data.weather[0].description;
    }

    // ===== ì¼ì¼ ê¸°ë¡ì¥ =====
    const journalDate = document.getElementById('journal-date');
    const journalText = document.getElementById('journal-text');
    const journalPhotos = document.getElementById('journal-photos');
    const journalCount = document.getElementById('journal-count');
    const journalClearBtn = document.getElementById('journal-clear');
    const journalSaveBtn = document.getElementById('journal-save');
    const journalList = document.getElementById('journal-list');

    journalDate.value = todayString();

    journalText.addEventListener('input', () => {
      journalCount.textContent = journalText.value.length;
    });

    journalClearBtn.addEventListener('click', () => {
      journalText.value = '';
      journalPhotos.value = '';
      journalCount.textContent = '0';
    });

    function resizeImageToBase64(file, maxSize = 400) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = e => {
          const img = new Image();
          img.onload = () => {
            const canvas = document.createElement('canvas');
            const scale = Math.min(maxSize / img.width, maxSize / img.height, 1);
            canvas.width = img.width * scale;
            canvas.height = img.height * scale;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
            resolve(canvas.toDataURL('image/jpeg', 0.85));
          };
          img.onerror = reject;
          img.src = e.target.result;
        };
        reader.onerror = reject;
        reader.readAsDataURL(file);
      });
    }

    async function handleJournalSave() {
      const dateVal = journalDate.value;
      if (!dateVal) {
        alert('ë‚ ì§œë¥¼ ì„ íƒí•´ì¤˜!');
        return;
      }
      const minDate = '2026-01-16';
      const maxDate = '2026-02-01';
      if (dateVal < minDate || dateVal > maxDate) {
        alert('2026-01-16 ~ 2026-02-01 ì‚¬ì´ ë‚ ì§œë§Œ ê¸°ë¡í•  ìˆ˜ ìˆì–´!');
        return;
      }
      const text = journalText.value.trim();
      if (!text) {
        alert('ì˜¤ëŠ˜ì˜ ê¸°ë¡ì„ ì ì–´ì¤˜!');
        return;
      }

      const files = Array.from(journalPhotos.files || []).slice(0, 3);
      const photoData = [];
      for (const f of files) {
        try {
          const base64 = await resizeImageToBase64(f, 480);
          photoData.push(base64);
        } catch (e) {
          console.error('img convert error', e);
        }
      }

      const entries = loadData('journalEntries', []);
      const existingIndex = entries.findIndex(e => e.date === dateVal);
      const entry = {
        date: dateVal,
        text,
        photos: photoData,
        updatedAt: new Date().toISOString()
      };
      if (existingIndex >= 0) {
        entries[existingIndex] = entry;
      } else {
        entries.push(entry);
      }
      entries.sort((a, b) => a.date.localeCompare(b.date));
      saveData('journalEntries', entries);

      journalText.value = '';
      journalPhotos.value = '';
      journalCount.textContent = '0';
      renderJournals();
      alert('ê¸°ë¡ ì €ì¥ ì™„ë£Œ!');
    }

    journalSaveBtn.addEventListener('click', () => {
      handleJournalSave();
    });

    function renderJournals() {
      const entries = loadData('journalEntries', []);
      if (!entries.length) {
        journalList.innerHTML = '<div class="small">ì•„ì§ ê¸°ë¡ì´ ì—†ì–´. ì²« ê¸°ë¡ì„ ë‚¨ê²¨ë³¼ê¹Œ? âœï¸</div>';
        return;
      }
      journalList.innerHTML = '';
      entries.forEach(entry => {
        const div = document.createElement('div');
        div.className = 'journal-item';
        const moodTag = entry.date < '2026-01-20' ? 'ì¶œë°œ ì „ ì„¤ë ˜' :
                        (entry.date <= '2026-02-01' ? 'ì—¬í–‰ ì¤‘' : '');
        div.innerHTML = `
          <div class="journal-header">
            <span class="journal-date">${entry.date}</span>
            <span class="journal-tag">${moodTag}</span>
          </div>
          <div class="journal-body">${entry.text.replace(/\n/g, '<br>')}</div>
        `;
        if (entry.photos && entry.photos.length) {
          const photosDiv = document.createElement('div');
          photosDiv.className = 'journal-photos';
          entry.photos.forEach(src => {
            const img = document.createElement('img');
            img.src = src;
            photosDiv.appendChild(img);
          });
          div.appendChild(photosDiv);
        }
        journalList.appendChild(div);
      });
    }

    renderJournals();

    // ===== ì²´í¬ë¦¬ìŠ¤íŠ¸ =====
    const placeNameInput = document.getElementById('place-name');
    const placeUrlInput = document.getElementById('place-url');
    const placeAddBtn = document.getElementById('place-add');
    const checklistList = document.getElementById('checklist-list');
    const visitLogDiv = document.getElementById('visit-log');

    placeAddBtn.addEventListener('click', () => {
      const name = placeNameInput.value.trim();
      const url = placeUrlInput.value.trim();
      if (!name || !url) {
        alert('ì¥ì†Œ ì´ë¦„ê³¼ êµ¬ê¸€ë§µ ë§í¬ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì¤˜!');
        return;
      }
      const list = loadData('checklistPlaces', []);
      list.push({
        id: Date.now(),
        name,
        url,
        visited: false,
        visitedAt: null
      });
      saveData('checklistPlaces', list);
      placeNameInput.value = '';
      placeUrlInput.value = '';
      renderChecklist();
    });

    function toggleVisited(id, checked) {
      const list = loadData('checklistPlaces', []);
      const idx = list.findIndex(p => p.id === id);
      if (idx < 0) return;
      list[idx].visited = checked;
      list[idx].visitedAt = checked ? todayString() : null;
      saveData('checklistPlaces', list);
      renderChecklist();
    }

    function renderChecklist() {
      const list = loadData('checklistPlaces', []);
      if (!list.length) {
        checklistList.innerHTML = '<div class="small">ì•„ì§ ì¶”ê°€ëœ ì¥ì†Œê°€ ì—†ì–´. ê°€ë³´ê³  ì‹¶ì€ ê³³ë¶€í„° í•˜ë‚˜ì”© ì±„ì›Œë³´ì! ğŸŒ</div>';
        visitLogDiv.innerHTML = '';
        return;
      }
      checklistList.innerHTML = '';
      list.forEach(item => {
        const div = document.createElement('div');
        div.className = 'check-item';
        div.innerHTML = `
          <div class="check-top-row">
            <span class="check-name">${item.name}</span>
            <button class="btn btn-ghost btn-sm btn-danger" data-id="${item.id}">ì‚­ì œ</button>
          </div>
          <a href="${item.url}" target="_blank" class="check-link">êµ¬ê¸€ë§µìœ¼ë¡œ ì—´ê¸° â†—</a>
          <div class="check-bottom-row">
            <label>
              <input type="checkbox" ${item.visited ? 'checked' : ''} data-id="${item.id}">
              ë‹¤ë…€ì™”ì–´ìš”
            </label>
            <span class="small">
              ${item.visitedAt ? `ë°©ë¬¸ ë‚ ì§œ: ${item.visitedAt}` : 'ì•„ì§ ì•ˆ ê°”ì–´'}
            </span>
          </div>
        `;
        checklistList.appendChild(div);
      });

      checklistList.querySelectorAll('input[type="checkbox"]').forEach(chk => {
        chk.addEventListener('change', () => {
          const id = Number(chk.dataset.id);
          toggleVisited(id, chk.checked);
        });
      });

      checklistList.querySelectorAll('.btn-danger').forEach(btn => {
        btn.addEventListener('click', () => {
          const id = Number(btn.dataset.id);
          const list = loadData('checklistPlaces', []);
          const filtered = list.filter(p => p.id !== id);
          saveData('checklistPlaces', filtered);
          renderChecklist();
        });
      });

      const visitGroups = {};
      list.filter(i => i.visited && i.visitedAt).forEach(i => {
        if (!visitGroups[i.visitedAt]) visitGroups[i.visitedAt] = [];
        visitGroups[i.visitedAt].push(i.name);
      });
      const dates = Object.keys(visitGroups).sort();
      if (!dates.length) {
        visitLogDiv.innerHTML = '<div class="small">ì•„ì§ ë°©ë¬¸ ê¸°ë¡ì´ ì—†ì–´. ì²´í¬ë¦¬ìŠ¤íŠ¸ì—ì„œ ë‹¤ë…€ì˜¨ ê³³ì— ì²´í¬í•˜ë©´ ë‚ ì§œë³„ ëª©ë¡ì´ ì—¬ê¸° ë³´ì—¬!</div>';
        return;
      }
      visitLogDiv.innerHTML = '<div class="small">âœ” ë‚ ì§œë³„ë¡œ ì–´ë””ë¥¼ ëŒì•˜ëŠ”ì§€ í•œ ëˆˆì— ë³´ê¸°</div>';
      dates.forEach(date => {
        const groupDiv = document.createElement('div');
        groupDiv.className = 'visit-log-group';
        const pills = visitGroups[date].map(name => `<span class="visit-log-pill">${name}</span>`).join(' ');
        groupDiv.innerHTML = `<strong>${date}</strong><div class="visit-log-list">${pills}</div>`;
        visitLogDiv.appendChild(groupDiv);
      });
    }

    renderChecklist();

    // ===== ë˜ê°„ì§‘ =====
    const togName = document.getElementById('tog-name');
    const togPhoto1 = document.getElementById('tog-photo1');
    const togPhoto2 = document.getElementById('tog-photo2');
    const togNote = document.getElementById('tog-note');
    const togCount = document.getElementById('tog-count');
    const togSaveBtn = document.getElementById('tog-save');
    const togList = document.getElementById('tog-list');

    togNote.addEventListener('input', () => {
      togCount.textContent = togNote.value.length;
    });

    async function handleTogSave() {
      const name = togName.value.trim();
      if (!name) {
        alert('ì¥ì†Œ ì´ë¦„ì„ ì…ë ¥í•´ì¤˜!');
        return;
      }
      if (!togPhoto1.files[0] || !togPhoto2.files[0]) {
        alert('ë‘ ì¥ì˜ ì‚¬ì§„ì„ ëª¨ë‘ ì„ íƒí•´ì¤˜! (ì˜ˆ: 2024 / ì´ë²ˆ ì—¬í–‰)');
        return;
      }
      const note = togNote.value.trim();
      const beforeImg = await resizeImageToBase64(togPhoto1.files[0], 480);
      const afterImg = await resizeImageToBase64(togPhoto2.files[0], 480);
      const list = loadData('toganjipEntries', []);
      list.push({
        id: Date.now(),
        name,
        beforeImg,
        afterImg,
        note,
        createdAt: todayString()
      });
      saveData('toganjipEntries', list);
      togName.value = '';
      togPhoto1.value = '';
      togPhoto2.value = '';
      togNote.value = '';
      togCount.textContent = '0';
      renderToganjip();
      alert('ë˜ê°„ì§‘ ì¹´ë“œê°€ ì¶”ê°€ëì–´!');
    }

    togSaveBtn.addEventListener('click', () => {
      handleTogSave();
    });

    function renderToganjip() {
      const list = loadData('toganjipEntries', []);
      if (!list.length) {
        togList.innerHTML = '<div class="small">ì•„ì§ ë˜ê°„ì§‘ì´ ì—†ì–´. ì´ë²ˆ ì—¬í–‰ì—ì„œ ìš°ë¦¬ë§Œì˜ ë‹¨ê³¨ì„ ë§Œë“¤ì–´ë³´ì ğŸ˜Š</div>';
        return;
      }
      togList.innerHTML = '';
      list.forEach(item => {
        const div = document.createElement('div');
        div.className = 'toganjip-card';
        div.innerHTML = `
          <div class="journal-header">
            <span class="journal-date">${item.name}</span>
            <span class="small">ì¹´ë“œ ë§Œë“  ë‚ : ${item.createdAt}</span>
          </div>
          <div class="toganjip-photos">
            <div>
              <img src="${item.beforeImg}" alt="before">
              <div class="toganjip-label">ì²« ë°©ë¬¸</div>
            </div>
            <div>
              <img src="${item.afterImg}" alt="after">
              <div class="toganjip-label">ì´ë²ˆ ì—¬í–‰</div>
            </div>
          </div>
          <div class="journal-body">${(item.note || '').replace(/\n/g, '<br>')}</div>
        `;
        togList.appendChild(div);
      });
    }

    renderToganjip();

    // ===== ì¦‰ì„ ê¸°ë¶„ ì±„íŒ…ë°© =====
    const chatJianInput = document.getElementById('chat-jian-input');
    const chatJianCount = document.getElementById('chat-jian-count');
    const chatJianSend = document.getElementById('chat-jian-send');
    const chatJianLog = document.getElementById('chat-jian-log');

    const chatEunInput = document.getElementById('chat-eun-input');
    const chatEunCount = document.getElementById('chat-eun-count');
    const chatEunSend = document.getElementById('chat-eun-send');
    const chatEunLog = document.getElementById('chat-eun-log');

    chatJianInput.addEventListener('input', () => {
      chatJianCount.textContent = chatJianInput.value.length;
    });
    chatEunInput.addEventListener('input', () => {
      chatEunCount.textContent = chatEunInput.value.length;
    });

    function getTimeString() {
      const now = new Date();
      const h = String(now.getHours()).padStart(2, '0');
      const m = String(now.getMinutes()).padStart(2, '0');
      return `${h}:${m}`;
    }

    function saveChat(who, text, locationText) {
      const key = who === 'jian' ? 'chatJian' : 'chatEun';
      const list = loadData(key, []);
      list.unshift({
        id: Date.now(),
        text,
        date: todayString(),
        time: getTimeString(),
        location: locationText
      });
      saveData(key, list);
      renderChat();
    }

    function requestLocationAndSave(who, text) {
      if (!navigator.geolocation) {
        saveChat(who, text, 'ìœ„ì¹˜ ì •ë³´ ì—†ìŒ');
        return;
      }
      navigator.geolocation.getCurrentPosition(
        pos => {
          const { latitude, longitude } = pos.coords;
          const locText = `(${latitude.toFixed(4)}, ${longitude.toFixed(4)})`;
          saveChat(who, text, locText);
        },
        () => {
          saveChat(who, text, 'ìœ„ì¹˜ ì •ë³´ ì—†ìŒ');
        },
        { timeout: 5000 }
      );
    }

    chatJianSend.addEventListener('click', () => {
      const text = chatJianInput.value.trim();
      if (!text) {
        alert('í•œ ì¤„ì´ë¼ë„ ì ì–´ì¤˜!');
        return;
      }
      requestLocationAndSave('jian', text);
      chatJianInput.value = '';
      chatJianCount.textContent = '0';
    });

    chatEunSend.addEventListener('click', () => {
      const text = chatEunInput.value.trim();
      if (!text) {
        alert('í•œ ì¤„ì´ë¼ë„ ì ì–´ì¤˜!');
        return;
      }
      requestLocationAndSave('eun', text);
      chatEunInput.value = '';
      chatEunCount.textContent = '0';
    });

    function renderChat() {
      const listJian = loadData('chatJian', []);
      const listEun = loadData('chatEun', []);
      function renderOne(list, container) {
        if (!list.length) {
          container.innerHTML = '<div class="small">ì•„ì§ ì²« í•œ ì¤„ì´ ì—†ì–´. ì§€ê¸ˆ ê¸°ë¶„ì„ ì‚´ì§ ë‚¨ê²¨ë³¼ê¹Œ? :)</div>';
          return;
        }
        container.innerHTML = '';
        list.forEach(item => {
          const div = document.createElement('div');
          div.className = 'chat-bubble';
          div.innerHTML = `
            <div class="chat-meta">${item.date} ${item.time} Â· ${item.location}</div>
            <div>${item.text.replace(/\n/g, '<br>')}</div>
          `;
          container.appendChild(div);
        });
      }
      renderOne(listJian, chatJianLog);
      renderOne(listEun, chatEunLog);
    }

    renderChat();
  </script>
</body>
</html>
