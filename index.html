<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Tori & Eunseol in AUS âœˆï¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --bg: #0b1020;
      --card: rgba(24, 30, 60, 0.9);
      --accent: #8fe4ff;
      --accent2: #ffc8ff;
      --text: #f7f8ff;
      --muted: #a8b0d8;
      --danger: #ff8b8b;
    }    html, body {
      background: #050713;
    }



    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at 10% 20%, #242c5a 0, #0b1020 50%, #050713 100%);
      color: var(--text);
      padding: 16px;
      position: relative;
      overflow-x: hidden;
    }

    .star {
      position: fixed;
      inset: -50%;
      background-image:
        radial-gradient(circle, rgba(255, 255, 255, 0.9) 0, transparent 50%),
        radial-gradient(circle, rgba(255, 255, 255, 0.6) 0, transparent 50%),
        radial-gradient(circle, rgba(143, 228, 255, 0.9) 0, transparent 50%),
        radial-gradient(circle, rgba(255, 200, 255, 0.9) 0, transparent 50%);
      background-size: 2px 2px, 1px 1px, 1.8px 1.8px, 1.2px 1.2px;
      background-position:
        10% 20%,
        30% 80%,
        70% 10%,
        90% 60%;
      opacity: 0.3;
      mix-blend-mode: screen;
      pointer-events: none;
      animation: twinkle 12s infinite alternate;
      z-index: -2;
    }

    @keyframes twinkle {
      0% { opacity: 0.2; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.02); }
      100% { opacity: 0.4; transform: scale(1); }
    }

    .bubble-layer {
      position: fixed;
      inset: 0;
      background:
        radial-gradient(circle at 10% 90%, rgba(143, 228, 255, 0.14) 0, transparent 55%),
        radial-gradient(circle at 80% 10%, rgba(255, 200, 255, 0.16) 0, transparent 50%),
        radial-gradient(circle at 50% 50%, rgba(143, 228, 255, 0.05) 0, transparent 60%);
      opacity: 0.9;
      pointer-events: none;
      z-index: -1;
    }

    header {
      max-width: 1040px;
      margin: 0 auto 16px;
      text-align: center;
    }

    header h1 {
      font-size: 1.8rem;
      font-weight: 700;
      letter-spacing: 0.03em;
      margin-bottom: 4px;
    }

    header p {
      font-size: 0.9rem;
      color: var(--muted);
    }

    .chip-row {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
    }

    .chip {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.16);
      font-size: 0.76rem;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      background: rgba(6, 8, 24, 0.9);
      backdrop-filter: blur(12px);
    }

    .chip span {
      font-size: 0.8rem;
    }

    .chip-icon {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff 0, #ffc8ff 40%, #8fe4ff 100%);
    }

    nav {
      max-width: 1040px;
      margin: 12px auto 18px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
    }

    nav button {
      flex: 1 1 130px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(6, 8, 24, 0.92);
      color: var(--muted);
      font-size: 0.8rem;
      padding: 8px 12px;
      cursor: pointer;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      gap: 6px;
      transition: all 0.2s ease-out;
    }

    nav button span.emoji {
      font-size: 1rem;
    }

    nav button.active {
      background: linear-gradient(135deg, rgba(143, 228, 255, 0.25), rgba(255, 200, 255, 0.25));
      color: #ffffff;
      border-color: rgba(255,255,255,0.5);
      box-shadow: 0 0 12px rgba(143, 228, 255, 0.3);
    }

    main {
      max-width: 1040px;
      margin: 0 auto 40px;
    }

    section {
      display: none;
    }

    section.active {
      display: block;
    }

    .card {
      background: var(--card);
      border-radius: 20px;
      padding: 14px 16px;
      box-shadow:
        0 16px 40px rgba(0, 0, 0, 0.55),
        0 0 0 1px rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.12);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at 10% 0%, rgba(143, 228, 255, 0.14) 0, transparent 50%),
        radial-gradient(circle at 80% 100%, rgba(255, 200, 255, 0.14) 0, transparent 52%);
      opacity: 0.6;
      pointer-events: none;
      z-index: -1;
    }

    .card-title-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
    }

    .card h2 {
      font-size: 1rem;
    }

    .badge {
      font-size: 0.72rem;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(6, 8, 24, 0.88);
      border: 1px solid rgba(255,255,255,0.24);
      color: var(--muted);
      white-space: nowrap;
    }

    .desc {
      font-size: 0.8rem;
      color: var(--muted);
      margin-bottom: 8px;
      line-height: 1.4;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
      font-size: 0.75rem;
    }

    .pill {
      border-radius: 999px;
      padding: 2px 8px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(6,8,24,0.92);
    }

    .divider {
      height: 1px;
      border-radius: 999px;
      margin: 10px 0;
      background: linear-gradient(90deg, transparent, rgba(143, 228, 255, 0.5), transparent);
      opacity: 0.5;
    }

    .weather-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
      gap: 10px;
      margin-top: 6px;
    }

    .weather-card {
      border-radius: 16px;
      padding: 10px 12px;
      background: rgba(6, 8, 24, 0.92);
      border: 1px solid rgba(255,255,255,0.12);
      font-size: 0.78rem;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .weather-title {
      font-weight: 600;
      display: flex;
      justify-content: space-between;
    }

    .weather-temp {
      font-size: 1.2rem;
      font-weight: 700;
      margin-top: 2px;
    }

    .weather-sub {
      font-size: 0.72rem;
      color: var(--muted);
    }

    .weather-meta {
      display: flex;
      justify-content: space-between;
      font-size: 0.72rem;
      color: var(--muted);
      margin-top: 4px;
    }

    .checklist-list.weather-day {
      margin-top: 4px;
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 4px;
      font-size: 0.7rem;
    }

    .weather-hour {
      padding: 4px 6px;
      border-radius: 10px;
      background: rgba(6, 8, 24, 0.92);
      border: 1px solid rgba(255,255,255,0.14);
      text-align: center;
    }

    .weather-hour strong {
      display: block;
      font-size: 0.75rem;
    }

    .weather-hour span {
      display: block;
      opacity: 0.8;
    }

    @media (max-width: 720px) {
      .weather-grid {
        grid-template-columns: minmax(0,1fr);
      }
    }

    .journal-grid {
      display: grid;
      grid-template-columns: minmax(0, 0.9fr) minmax(0, 1.1fr);
      gap: 10px;
      margin-top: 8px;
    }

    @media (max-width: 720px) {
      .journal-grid {
        grid-template-columns: minmax(0,1fr);
      }
    }

    .journal-inputs {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    label {
      font-size: 0.75rem;
      color: var(--muted);
      display: block;
      margin-bottom: 2px;
    }

    input, textarea, select {
      width: 100%;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.15);
      background: rgba(6,8,24,0.94);
      color: var(--text);
      padding: 6px 8px;
      font-size: 0.8rem;
      outline: none;
    }

    input::placeholder,
    textarea::placeholder {
      color: rgba(145,155,190,0.7);
    }

    textarea {
      resize: vertical;
      min-height: 90px;
      max-height: 240px;
    }

    .input-row {
      display: flex;
      gap: 6px;
    }

    .input-row > div {
      flex: 1;
      min-width: 0;
    }

    .photo-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      font-size: 0.74rem;
      color: var(--muted);
    }

    .photo-row input {
      flex: 1;
      min-width: 0;
    }

    .small-hint {
      font-size: 0.72rem;
      color: var(--muted);
      margin-top: 4px;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(6,8,24,0.96);
      color: var(--text);
      font-size: 0.78rem;
      cursor: pointer;
      transition: all 0.18s ease-out;
    }

    .btn-primary {
      background: linear-gradient(135deg, #8fe4ff, #ffc8ff);
      color: #050713;
      border-color: transparent;
      box-shadow: 0 0 10px rgba(143, 228, 255, 0.4);
    }

    .btn-primary:hover {
      filter: brightness(1.05);
      box-shadow: 0 0 14px rgba(143, 228, 255, 0.6);
    }

    .btn-text {
      background: transparent;
      border-color: rgba(255,255,255,0.12);
      color: var(--muted);
    }

    .journal-list {
      margin-top: 4px;
      max-height: 420px;
      overflow-y: auto;
      padding-right: 4px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      font-size: 0.78rem;
    }

    .journal-item {
      border-radius: 14px;
      padding: 7px 8px;
      background: rgba(6,8,24,0.96);
      border: 1px solid rgba(255,255,255,0.18);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .journal-meta {
      display: flex;
      justify-content: space-between;
      gap: 6px;
      font-size: 0.75rem;
      color: var(--muted);
    }

    .journal-photos {
      display: flex;
      gap: 4px;
      margin-top: 2px;
    }

    .journal-photos img {
      width: 72px;
      height: 72px;
      object-fit: cover;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.2);
    }

    .checklist-list {
      display: grid;
      gap: 8px;
      margin-top: 8px;
    }

    .packing-list {
      list-style: none;
      margin-top: 6px;
      font-size: 0.8rem;
    }

    .packing-list li {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 4px 6px;
      border-radius: 10px;
      background: rgba(9, 10, 30, 0.9);
      border: 1px solid rgba(255,255,255,0.16);
      margin-top: 4px;
    }

    .packing-list li span {
      flex: 1;
      word-break: break-all;
    }

    .packing-list li button {
      font-size: 0.7rem;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.2);
      background: transparent;
      color: var(--muted);
      cursor: pointer;
    }

    .packing-list li input[type="checkbox"] {
      accent-color: #8fe4ff;
    }


    .check-item {
      border-radius: 14px;
      padding: 8px 10px;
      background: rgba(9, 10, 30, 0.9);
      border: 1px solid rgba(255,255,255,0.16);
      font-size: 0.8rem;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .check-item-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
    }

    .check-item-header span.label {
      white-space: nowrap;
      font-weight: 600;
    }

    .check-sub {
      font-size: 0.76rem;
      color: var(--muted);
    }

    .check-actions {
      display: flex;
      gap: 6px;
      margin-top: 3px;
    }

    .check-actions button {
      font-size: 0.7rem;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(6,8,24,0.9);
      cursor: pointer;
      color: var(--muted);
    }

    .visit-log {
      margin-top: 8px;
      font-size: 0.76rem;
      color: var(--muted);
    }

    .visit-log-entry {
      padding: 4px 0;
    }

    .toganjip-grid {
      margin-top: 8px;
      display: grid;
      grid-template-columns: minmax(0, 1.05fr) minmax(0, 0.95fr);
      gap: 10px;
    }

    @media (max-width: 720px) {
      .toganjip-grid {
        grid-template-columns: minmax(0,1fr);
      }
    }

    .mini-input-row {
      display: flex;
      gap: 6px;
      margin-top: 4px;
    }

    .mini-input-row input {
      font-size: 0.78rem;
      padding: 5px 7px;
    }

    .memo-photo-box {
      border-radius: 16px;
      padding: 8px;
      background: rgba(6,8,24,0.96);
      border: 1px dashed rgba(255,255,255,0.28);
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 6px;
      margin-top: 8px;
      font-size: 0.78rem;
    }

    .photo-placeholder {
      border-radius: 12px;
      background: radial-gradient(circle at 20% 10%, rgba(143, 228, 255, 0.6), transparent 55%),
                  radial-gradient(circle at 80% 90%, rgba(255, 200, 255, 0.6), transparent 55%);
      border: 1px solid rgba(255,255,255,0.4);
      min-height: 90px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: rgba(3, 5, 20, 0.86);
      font-weight: 600;
      text-align: center;
      padding: 4px;
    }

    .memo-textarea {
      margin-top: 6px;
      font-size: 0.78rem;
    }

    .toganjip-list {
      margin-top: 4px;
      max-height: 420px;
      overflow-y: auto;
      padding-right: 4px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      font-size: 0.78rem;
    }

    .toganjip-item {
      border-radius: 14px;
      padding: 7px 8px;
      background: rgba(6,8,24,0.96);
      border: 1px solid rgba(255,255,255,0.18);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .toganjip-meta {
      display: flex;
      justify-content: space-between;
      gap: 6px;
      font-size: 0.75rem;
      color: var(--muted);
    }

    .toganjip-photos {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 4px;
      margin-top: 3px;
    }

    .toganjip-photos img {
      width: 100%;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.2);
      object-fit: cover;
    }

    .toganjip-photos div {
      font-size: 0.7rem;
      color: var(--muted);
      text-align: center;
    }

    .chat-grid {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 10px;
      margin-top: 6px;
      font-size: 0.78rem;
    }

    @media (max-width: 720px) {
      .chat-grid {
        grid-template-columns: minmax(0,1fr);
      }
    }

    .chat-col h3 {
      font-size: 0.9rem;
      margin-bottom: 4px;
    }

    .chat-input-row {
      display: flex;
      gap: 6px;
      align-items: flex-start;
    }

    .chat-input-row textarea {
      flex: 1;
      min-height: 60px;
    }

    .chat-counter {
      font-size: 0.72rem;
      color: var(--muted);
      margin-top: 2px;
      text-align: right;
    }

    .chat-log {
      margin-top: 6px;
      max-height: 260px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .chat-bubble {
      border-radius: 14px;
      padding: 7px 8px;
      background: rgba(6,8,24,0.96);
      border: 1px solid rgba(255,255,255,0.18);
    }

    .chat-meta {
      font-size: 0.72rem;
      color: var(--muted);
      margin-bottom: 2px;
    }

    footer {
      max-width: 1040px;
      margin: 0 auto;
      font-size: 0.72rem;
      color: var(--muted);
      text-align: center;
    }

    @media (max-width: 600px) {
      body {
        padding: 12px;
      }

      header h1 {
        font-size: 1.5rem;
      }

      nav {
        margin-top: 10px;
      }

      .card {
        border-radius: 18px;
        padding: 12px 12px;
      }

      .journal-photos img {
        width: 64px;
        height: 64px;
      }
    }
  </style>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

</head>
<body>
  <!-- ë°°ê²½ìš© ì‘ì€ ë³„ë“¤ -->
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>
  <div class="star"></div>

  <div class="bubble-layer"></div>

  <header>
    <h1>âœ¨ Jian & Eunseol in AUS âœˆï¸</h1>
    <p> ì—¬í–‰ ì¼ê¸° â€¢ ì²´í¬ë¦¬ìŠ¤íŠ¸ â€¢ ë˜ê°„ì§‘ â€¢ ìš°ë¦¬ ë‘˜ë§Œì˜ ì±„íŒ…ë°© â€¢ ì§ ì±™ê¸°ê¸° ğŸ’</p>
    <div class="chip-row">
      <div class="chip">
        <div class="chip-icon"></div>
        <span>ì„¤ì´ë‘ ìŸˆë‹ˆì˜ ë‘ ë²ˆì§¸ í˜¸ì£¼ ì—¬í–‰ ğŸŒ™</span>
      </div>
      <div class="chip">
        <span>â° 2026-01-16 ~ 02-01 (ì¶œë°œ: 01-20)</span>
      </div>
      <div class="chip">
        <span>âœ¨ ë©œë²„ë¥¸ & ì‹œë“œë‹ˆ ê°ì„± ê¸°ë¡</span>
      </div>
    </div>
  </header>

  <nav>
    <button data-target="home" class="active">Home</button>
    <button data-target="journal">ì¼ì¼ ê¸°ë¡ì¥</button>
    <button data-target="checklist">ì²´í¬ë¦¬ìŠ¤íŠ¸</button>
    <button data-target="packing">ì§ì„ ì±™ê²¨ìš”</button>
    <button data-target="toganjip">ë˜ê°„ì§‘</button>
    <button data-target="chat">ìš°ë¦¬ ë‘˜ ì±„íŒ…ë°©</button>
  </nav>

  <main>
    <!-- HOME -->
    <section id="home" class="active">
      <div class="card">
        <div class="card-title-row">
          <h2>ì˜¤ëŠ˜ì˜ ë©œë²„ë¥¸ & í˜¸ì£¼ ë‚ ì”¨</h2>
          <span class="badge">weather</span>
        </div>
        <p class="desc">
          ë©œë²„ë¥¸, í˜¸ì£¼ ì „ì²´ ë‚ ì”¨ë¥¼ ê°„ë‹¨í•˜ê²Œ ì ì–´ë‘ëŠ” ê³µê°„ì´ì•¼. ì‹¤ì œ APIëŠ” ì•ˆ ë¶™ì˜€ì§€ë§Œ, ê·¸ë‚  ê·¸ë‚  ëŠë‚Œì„ ê¸°ë¡í•  ìˆ˜ ìˆì–´ â˜ï¸
        </p>
        <div class="weather-grid">
          <div class="weather-card">
            <div class="weather-title">
              <span>ë©œë²„ë¥¸</span>
              <span>ğŸ‡¦ğŸ‡º</span>
            </div>
            <div class="weather-temp" id="mel-temp">â€”Â°C</div>
            <div class="weather-sub" id="mel-desc">í•˜ëŠ˜ ìƒíƒœ ë©”ëª¨</div>
            <div class="weather-meta">
              <span id="mel-high">ìµœê³  â€”Â°</span>
              <span id="mel-low">ìµœì € â€”Â°</span>
            </div>
          </div>
          <div class="weather-card">
            <div class="weather-title">
              <span>í˜¸ì£¼ ì „ì²´ ëŠë‚Œ</span>
              <span>ğŸ—ºï¸</span>
            </div>
            <div class="weather-temp" id="au-temp">â€”Â°C</div>
            <div class="weather-sub" id="au-desc">ë„ì‹œë³„ ë‚ ì”¨ í•œ ì¤„ ìš”ì•½</div>
            <div class="weather-meta">
              <span id="au-note">ì˜ˆ: ì‹œë“œë‹ˆ ë§‘ìŒ, ë©œë²„ë¥¸ ì„ ì„ </span>
              <span style="opacity:0.8;">ê¸°ë¡ìš©</span>
            </div>
          </div>
        </div>
        <div class="divider"></div>
        <p class="desc" style="margin-top:4px;">
          ì•„ë˜ëŠ” ê·¸ë‚ ê·¸ë‚  ì‹œê°„ëŒ€ë³„ ë‚ ì”¨ / ì¼ì • ë©”ëª¨ë¡œ ì¨ë„ ì¢‹ì•„.
        </p>
        <div class="checklist-list weather-day">
          <div class="weather-hour">
            <strong>ì•„ì¹¨</strong>
            <span id="hour-am">-</span>
          </div>
          <div class="weather-hour">
            <strong>ì ì‹¬</strong>
            <span id="hour-noon">-</span>
          </div>
          <div class="weather-hour">
            <strong>ì €ë…</strong>
            <span id="hour-pm">-</span>
          </div>
          <div class="weather-hour">
            <strong>ë°¤</strong>
            <span id="hour-night">-</span>
          </div>
        </div>
      </div>
    </section>

    <!-- JOURNAL -->
    <section id="journal">
      <div class="card">
        <div class="card-title-row">
          <h2>ì¼ì¼ ê¸°ë¡ì¥ ğŸ““</h2>
          <span class="badge">2026-01-16 ~ 02-01</span>
        </div>
        <p class="desc">
          ì—¬í–‰ ì „ ë‘ê·¼ê±°ë¦¼ë¶€í„°, ëŒì•„ì˜¤ëŠ” ë‚ ê¹Œì§€ í•˜ë£¨ë¥¼ ìµœëŒ€ 500ìë¡œ ê¸°ë¡í•  ìˆ˜ ìˆëŠ” ê³µê°„ì´ì•¼. ì‚¬ì§„ ë§í¬ë„ 3ì¥ê¹Œì§€ ë¶™ì¼ ìˆ˜ ìˆì–´ ğŸ“·
        </p>

        <div class="journal-grid">
          <div class="journal-inputs">
            <div class="input-row">
              <div>
                <label for="journal-date">ë‚ ì§œ</label>
                <input id="journal-date" type="date" min="2026-01-16" max="2026-02-01">
              </div>
              <div>
                <label for="journal-mood">ì˜¤ëŠ˜ì˜ ê¸°ë¶„</label>
                <input id="journal-mood" placeholder="ì˜ˆ: ë‘ê·¼ë‘ê·¼, í”¼ê³¤í•˜ì§€ë§Œ í–‰ë³µ, ì„¤ë ˆëŠ” ì¤€ë¹„ ì¤‘">
              </div>
            </div>

            <div>
              <label>ì‚¬ì§„ ë§í¬ (ìµœëŒ€ 3ì¥)</label>
              <div class="photo-row">
                <input id="journal-photo1" placeholder="ì‚¬ì§„ 1 URL">
                <input id="journal-photo2" placeholder="ì‚¬ì§„ 2 URL">
                <input id="journal-photo3" placeholder="ì‚¬ì§„ 3 URL">
              </div>
            </div>

            <div>
              <label for="journal-text">ì˜¤ëŠ˜ì˜ ê¸°ë¡ (500ì ì´ë‚´)</label>
              <textarea id="journal-text" maxlength="500" placeholder="ì˜¤ëŠ˜ ìˆì—ˆë˜ ì¼, ê°ì •, ì‘ì€ ìˆœê°„ì„ ì ì–´ì¤˜."></textarea>
              <div class="small-hint">
                <span id="journal-count">0</span>/500 ê¸€ì
              </div>
            </div>

            <div class="chip-row" style="justify-content:flex-start;">
              <button class="btn btn-primary" id="journal-save-btn">
                <span>ê¸°ë¡ ì €ì¥í•˜ê¸°</span> <span>âœ¨</span>
              </button>
              <button class="btn btn-text" id="journal-clear-btn">
                ì˜¤ëŠ˜ ë‚´ìš©ë§Œ ì§€ìš°ê¸°
              </button>
            </div>
          </div>

          <div>
            <label>ê¸°ë¡ ëª¨ì•„ë³´ê¸°</label>
            <div class="journal-list" id="journal-list"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- CHECKLIST -->
    <section id="checklist">
      <div class="card">
        <div class="card-title-row">
          <h2>ê°€ê³  ì‹¶ì€ ì¥ì†Œ ì²´í¬ë¦¬ìŠ¤íŠ¸ ğŸ“</h2>
          <span class="badge">with Google Maps ë§í¬</span>
        </div>
        <p class="desc">
          ê°€ê³  ì‹¶ì€ ì¹´í˜, ë§›ì§‘, ê´€ê´‘ì§€ë¥¼ ì ì–´ë‘ê³ , êµ¬ê¸€ë§µ ë§í¬ë¥¼ ë¶™ì´ë©´ í´ë¦­ í•œ ë²ˆìœ¼ë¡œ ë°”ë¡œ ì´ë™í•  ìˆ˜ ìˆì–´.
          ë‹¤ë…€ì™”ë‹¤ë©´ ì²´í¬í•˜ë©´, ì•„ë˜ â€œë‹¤ë…€ì˜¨ ê¸°ë¡â€ì— ë‚ ì§œì™€ í•¨ê»˜ ìŒ“ì—¬!
        </p>

        <div class="input-row" style="margin-top:6px;">
          <div>
            <label for="place-name">ì¥ì†Œ ì´ë¦„</label>
            <input id="place-name" placeholder="ì˜ˆ: ë©œë²„ë¥¸ ë¸ŒëŸ°ì¹˜ ì¹´í˜, ì•¼ë¼ ê°• ì•¼ê²½ ìŠ¤íŒŸ">
          </div>
          <div>
            <label for="place-link">êµ¬ê¸€ë§µ ë§í¬</label>
            <input id="place-link" placeholder="https://goo.gl/maps/...">
          </div>
        </div>

        <div class="chip-row" style="justify-content:flex-start;">
          <button class="btn btn-primary" id="place-add-btn">ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€</button>
          <span class="small-hint">ì¥ì†Œ ì´ë¦„ / ë§í¬ëŠ” ë‚˜ì¤‘ì— ìˆ˜ì •ë„ ê°€ëŠ¥í•´.</span>
        </div>

        <div class="divider"></div>

        <div class="card-title-row">
          <h3 style="font-size:0.9rem;">ê°€ê³  ì‹¶ì€ ì¥ì†Œ ëª©ë¡</h3>
          <span class="badge">âœ… visited</span>
        </div>
        <div id="checklist-list" class="checklist-list small"></div>
        <div id="visit-log" class="visit-log"></div>
      </div>
    </section>

    <!-- PACKING -->
    <section id="packing">
      <div class="card">
        <div class="card-title-row">
          <h2>ì§ì„ ì±™ê²¨ìš” ğŸ’</h2>
          <span class="badge">ê³µìš© / ì§€ì•ˆ / ì€ì„¤</span>
        </div>
        <p class="desc">
          ê°™ì´ ì“°ëŠ” ì§, ì§€ì•ˆì´ê°€ ì±™ê¸¸ ê²ƒ, ì€ì„¤ì´ê°€ ì±™ê¸¸ ê²ƒì„ ë‚˜ëˆ ì„œ ì •ë¦¬í•˜ëŠ” ë¦¬ìŠ¤íŠ¸ì•¼.
          í•œ ë²ˆ ì ì–´ë‘ë©´ ì´ ì•±ì„ ì—¬ëŠ” ì–´ë””ì„œë“  ê°™ì´ ë³¼ ìˆ˜ ìˆê²Œ ë§Œë“¤ ê±°ì•¼ âœ¨
        </p>

        <div class="card" style="margin-top: 10px;">
          <h3 style="font-size:0.9rem; margin-bottom:6px;">ê³µìš© ì§</h3>
          <div class="chip-row" style="justify-content:flex-start;">
            <input id="pack-common-input" placeholder="ì˜ˆ: ë©€í‹°íƒ­, ë³´ë“œê²Œì„" style="flex:1; min-width:0;">
            <button class="btn btn-primary" onclick="addPacking('common')">ì¶”ê°€</button>
          </div>
          <ul id="pack-common-list" class="packing-list"></ul>
        </div>

        <div class="card" style="margin-top: 10px;">
          <h3 style="font-size:0.9rem; margin-bottom:6px;">ì§€ì•ˆì´ê°€ ì±™ê²¨ì˜¤ê¸°</h3>
          <div class="chip-row" style="justify-content:flex-start;">
            <input id="pack-jian-input" placeholder="ì˜ˆ: ì¹´ë©”ë¼, í•„ë¦„" style="flex:1; min-width:0;">
            <button class="btn btn-primary" onclick="addPacking('jian')">ì¶”ê°€</button>
          </div>
          <ul id="pack-jian-list" class="packing-list"></ul>
        </div>

        <div class="card" style="margin-top: 10px;">
          <h3 style="font-size:0.9rem; margin-bottom:6px;">ì€ì„¤ì´ê°€ ì±™ê²¨ì˜¤ê¸°</h3>
          <div class="chip-row" style="justify-content:flex-start;">
            <input id="pack-seol-input" placeholder="ì˜ˆ: ë“œë¼ì´ê¸°, íŒŒìë§ˆ" style="flex:1; min-width:0;">
            <button class="btn btn-primary" onclick="addPacking('seol')">ì¶”ê°€</button>
          </div>
          <ul id="pack-seol-list" class="packing-list"></ul>
        </div>
      </div>
    </section>


    <!-- TOGANJIP -->
    <section id="toganjip">
      <div class="card">
        <div class="card-title-row">
          <h2>ë˜ê°„ì§‘ ë©”ëª¨ì¥ ğŸ </h2>
          <span class="badge">2024 vs ì´ë²ˆ ì—¬í–‰</span>
        </div>
        <p class="desc">
          ì˜ˆì „ì— ê°”ë˜ ê³³ì„ ì´ë²ˆ ì—¬í–‰ì— ë˜ ê°„ë‹¤ë©´, 2024ë…„ ì‚¬ì§„ê³¼ ì´ë²ˆ ì—¬í–‰ ì‚¬ì§„ì„ ë‚˜ë€íˆ ë†“ê³  ë¹„êµí•˜ë©´ì„œ ì§§ê²Œ ë©”ëª¨í•´ë³´ì.
        </p>

        <div class="toganjip-grid">
          <div>
            <label>ë˜ê°„ì§‘ ì •ë³´</label>
            <div class="mini-input-row">
              <input id="tog-name" placeholder="ê°€ê²Œ/ì¥ì†Œ ì´ë¦„">
              <input id="tog-location" placeholder="ë„ì‹œ / ë™ë„¤">
            </div>

            <div class="memo-photo-box">
              <div class="photo-placeholder">
                2024ë…„<br>ì‚¬ì§„ ìë¦¬
              </div>
              <div class="photo-placeholder">
                ì´ë²ˆ ì—¬í–‰<br>ì‚¬ì§„ ìë¦¬
              </div>
              <div style="grid-column:1/3; font-size:0.72rem; color:var(--muted); text-align:left;">
                ì‹¤ì œ ì‚¬ì§„ì„ ì—¬ê¸°ì— ë°”ë¡œ ë„ìš°ì§„ ëª»í•˜ì§€ë§Œ, ì¸ìŠ¤íƒ€/ì•¨ë²”ì—ì„œ ì–´ë–¤ ì»·ì„ ì“¸ì§€ ë©”ëª¨ì²˜ëŸ¼ ì ì–´ë‘ë©´ ì¢‹ì•„ ğŸ“¸
              </div>
            </div>

            <div class="memo-textarea">
              <label for="tog-note">ë˜ ë°©ë¬¸í•œ í›„ê¸° (ê°„ë‹¨í•˜ê²Œ)</label>
              <textarea id="tog-note" maxlength="500" placeholder="ì˜ˆ: ì˜ˆì „ì—” ì‚¬ëŒ ë§ì•˜ëŠ”ë° ì´ë²ˆì—” ì—¬ìœ ë¡­ê³ , ì»¤í”¼ ë§›ì´ ë” ì¢‹ì•„ì§„ ëŠë‚Œ!"></textarea>
              <div class="small-hint">
                <span id="tog-count">0</span>/500 ê¸€ì
              </div>
            </div>

            <div class="chip-row" style="justify-content:flex-start;">
              <button class="btn btn-primary" id="tog-save-btn">ë˜ê°„ì§‘ ê¸°ë¡ ì €ì¥</button>
              <button class="btn btn-text" id="tog-clear-btn">ì…ë ¥ ë‚´ìš© ì§€ìš°ê¸°</button>
            </div>
          </div>

          <div>
            <label>ë˜ê°„ì§‘ ëª¨ì•„ë³´ê¸°</label>
            <div id="tog-list" class="toganjip-list"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- CHAT -->
    <section id="chat">
      <div class="card">
        <div class="card-title-row">
          <h2>ìš°ë¦¬ ë‘˜ ì¦‰ì„ ê¸°ë¶„ ì±„íŒ…ë°© ğŸ’¬</h2>
          <span class="badge">50ì ì´ë‚´</span>
        </div>
        <p class="desc">
          ê·¸ ìˆœê°„ì˜ ê¸°ë¶„ì„ 50ì ì´ë‚´ë¡œ ë‚¨ê¸°ëŠ” ìš°ë¦¬ ë‘˜ë§Œì˜ ì‘ì€ íƒ€ì„ë¼ì¸.
          ì§€ì•ˆì´ ë°©, ì€ì„¤ì´ ë°©ì´ ë”°ë¡œ ìˆì–´ì„œ ì„œë¡œì˜ ê¸°ë¶„ì„ ë‚˜ì¤‘ì— ë‹¤ì‹œ ë³´ë©´ ì¬ë°Œì„ ê±°ì•¼.
        </p>

        <div class="chat-grid">
          <div class="chat-col">
            <h3>ì§€ì•ˆì´ ê¸°ë¡ì¥ âœ¨</h3>
            <div class="chat-input-row">
              <textarea id="chat-jian-input" maxlength="50" placeholder="ì§€ê¸ˆ ê¸°ë¶„ì„ 50ì ì´ë‚´ë¡œ"></textarea>
              <button class="btn btn-primary" id="chat-jian-send">ë³´ë‚´ê¸°</button>
            </div>
            <div class="chat-counter">
              <span id="chat-jian-count">0</span>/50
            </div>
            <div id="chat-jian-log" class="chat-log"></div>
          </div>
          <div class="chat-col">
            <h3>ì€ì„¤ì´ ê¸°ë¡ì¥ ğŸŒ™</h3>
            <div class="chat-input-row">
              <textarea id="chat-eun-input" maxlength="50" placeholder="ì§€ê¸ˆ ê¸°ë¶„ì„ 50ì ì´ë‚´ë¡œ"></textarea>
              <button class="btn btn-primary" id="chat-eun-send">ë³´ë‚´ê¸°</button>
            </div>
            <div class="chat-counter">
              <span id="chat-eun-count">0</span>/50
            </div>
            <div id="chat-eun-log" class="chat-log"></div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    ë§Œë“  ì‚¬ëŒ: Tori & Eunseol â€¢ ëŒ€ë¶€ë¶„ ì •ë³´ëŠ” ì´ ë¸Œë¼ìš°ì €ì—, ì§ ë¦¬ìŠ¤íŠ¸ëŠ” ë‘˜ì´ ê°™ì´ ë³´ë ¤ê³  í´ë¼ìš°ë“œì— ì €ì¥ë¼ìš” ğŸŒ™
  </footer>

  <script>
    // ===== Firebase (ê³µìœ  ë°ì´í„°: ì§ ë¦¬ìŠ¤íŠ¸) =====
    const firebaseConfig = {
      apiKey: "AIzaSyAkKiBvatV-2VQd3mBTNwoX0ZkxVvSq5Ig",
      authDomain: "jian-1c9d3.firebaseapp.com",
      projectId: "jian-1c9d3",
      storageBucket: "jian-1c9d3.firebasestorage.app",
      messagingSenderId: "1081519555440",
      appId: "1:1081519555440:web:df585b5d3c6e10bbc805b5",
      measurementId: "G-GFG5TRPB5Q"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const packingCol = db.collection("packingItems");

    function renderPackingFromSnapshot(snapshot) {
      const lists = { common: [], jian: [], seol: [] };

      snapshot.forEach((doc) => {
        const data = doc.data();
        if (!data || !data.type) return;
        const type = data.type;
        if (!lists[type]) return;
        lists[type].push({
          id: doc.id,
          text: data.text || "",
          checked: !!data.checked,
          createdAt: data.createdAt
        });
      });

      ["common", "jian", "seol"].forEach((type) => {
        const ul = document.getElementById(`pack-${type}-list`);
        if (!ul) return;
        const arr = lists[type];

        if (!arr || !arr.length) {
          ul.innerHTML = '<li><span style="color: var(--muted);">ì•„ì§ ì•„ë¬´ê²ƒë„ ì—†ì–´. ì²« ì•„ì´í…œì„ ì ì–´ë³¼ê¹Œ? âœ¨</span></li>';
          return;
        }

        arr.sort((a, b) => {
          const ta = a.createdAt?.seconds || 0;
          const tb = b.createdAt?.seconds || 0;
          return ta - tb;
        });

        ul.innerHTML = "";
        arr.forEach((item) => {
          const li = document.createElement("li");

          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.checked = item.checked;
          checkbox.addEventListener("change", () => {
            togglePackingItem(item.id, !item.checked);
          });

          const span = document.createElement("span");
          span.textContent = item.text;
          if (item.checked) {
            span.style.textDecoration = "line-through";
            span.style.opacity = "0.6";
          }

          const delBtn = document.createElement("button");
          delBtn.textContent = "ì‚­ì œ";
          delBtn.addEventListener("click", () => {
            deletePackingItem(item.id);
          });

          li.appendChild(checkbox);
          li.appendChild(span);
          li.appendChild(delBtn);
          ul.appendChild(li);
        });
      });
    }

    packingCol.orderBy("createdAt").onSnapshot(renderPackingFromSnapshot);

    async function addPacking(type) {
      const input = document.getElementById(`pack-${type}-input`);
      if (!input) return;
      const text = input.value.trim();
      if (!text) return;

      await packingCol.add({
        type,
        text,
        checked: false,
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      });

      input.value = "";
    }

    async function togglePackingItem(id, checked) {
      await packingCol.doc(id).update({ checked });
    }

    async function deletePackingItem(id) {
      await packingCol.doc(id).delete();
    }

    // ===== ê¸°ë³¸ ë„ìš°ë¯¸ =====
    const STORAGE_PREFIX = 'tori-aus-2026-';

    function loadData(key, fallback) {
      try {
        const raw = localStorage.getItem(STORAGE_PREFIX + key);
        return raw ? JSON.parse(raw) : fallback;
      } catch (e) {
        console.error('load error', key, e);
        return fallback;
      }
    }

    function saveData(key, value) {
      localStorage.setItem(STORAGE_PREFIX + key, JSON.stringify(value));
    }

    function formatDate(date) {
      const y = date.getFullYear();
      const m = String(date.getMonth() + 1).padStart(2, '0');
      const d = String(date.getDate()).padStart(2, '0');
      return `${y}-${m}-${d}`;
    }

    function todayWithinTrip() {
      const today = new Date();
      const start = new Date('2026-01-16T00:00:00');
      const end = new Date('2026-02-01T23:59:59');
      if (today < start) return 'before';
      if (today > end) return 'after';
      return 'during';
    }

    // ===== ë„¤ë¹„ê²Œì´ì…˜ =====
    const navButtons = document.querySelectorAll('nav button');
    const sections = document.querySelectorAll('main section');

    navButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const target = btn.dataset.target;
        navButtons.forEach(b => b.classList.remove('active'));
        sections.forEach(sec => sec.classList.remove('active'));

        btn.classList.add('active');
        const sec = document.getElementById(target);
        if (sec) sec.classList.add('active');
      });
    });

    // ===== ë‚ ì”¨ ë©”ëª¨ (ë”ë¯¸) =====
    function initWeather() {
      const today = new Date();
      const month = today.getMonth() + 1;
      const melTemp = (month === 1 || month === 2) ? '22' : '18';
      const auTemp = (month === 1 || month === 2) ? '26' : '20';

      document.getElementById('mel-temp').textContent = `${melTemp}Â°C`;
      document.getElementById('au-temp').textContent = `${auTemp}Â°C`;

      document.getElementById('mel-desc').textContent = 'ì„ ì„ í•˜ì§€ë§Œ í–‡ì‚´ ì¢‹ì€ ë©œë²„ë¥¸';
      document.getElementById('au-desc').textContent = 'ë„ì‹œë§ˆë‹¤ ë‚ ì”¨ëŠ” ë‹¬ë¼ë„, ì—¬í–‰ì€ ëŠ˜ ì„¤ë ˜ ê°€ë“';
      document.getElementById('mel-high').textContent = 'ìµœê³  24Â°';
      document.getElementById('mel-low').textContent = 'ìµœì € 16Â°';
      document.getElementById('au-note').textContent = 'ì˜ˆ: ì‹œë“œë‹ˆ ë§‘ìŒ, ë©œë²„ë¥¸ êµ¬ë¦„, ë¸Œë¦¬ì¦ˆë²ˆ ë”ì›€';

      document.getElementById('hour-am').textContent = 'ì•„ì¹¨ ì‚°ì±… / ë¸ŒëŸ°ì¹˜';
      document.getElementById('hour-noon').textContent = 'ì ì‹¬ ë§›ì§‘ íƒë°©';
      document.getElementById('hour-pm').textContent = 'ë…¸ì„ ë³´ëŠ” ì‚°ì±…';
      document.getElementById('hour-night').textContent = 'ìˆ™ì†Œì—ì„œ ì´ì•¼ê¸° íƒ€ì„';
    }

    initWeather();

    // ===== ì¼ì¼ ê¸°ë¡ì¥ =====
    const journalDate = document.getElementById('journal-date');
    const journalMood = document.getElementById('journal-mood');
    const journalPhoto1 = document.getElementById('journal-photo1');
    const journalPhoto2 = document.getElementById('journal-photo2');
    const journalPhoto3 = document.getElementById('journal-photo3');
    const journalText = document.getElementById('journal-text');
    const journalCount = document.getElementById('journal-count');
    const journalSaveBtn = document.getElementById('journal-save-btn');
    const journalClearBtn = document.getElementById('journal-clear-btn');
    const journalList = document.getElementById('journal-list');

    const tripStatus = todayWithinTrip();
    if (tripStatus === 'before') {
      journalDate.value = '2026-01-16';
    } else if (tripStatus === 'during') {
      journalDate.value = formatDate(new Date());
    } else {
      journalDate.value = '2026-02-01';
    }

    journalText.addEventListener('input', () => {
      journalCount.textContent = journalText.value.length;
    });

    function loadJournal() {
      return loadData('journal', []);
    }

    function saveJournal(list) {
      saveData('journal', list);
    }

    function renderJournal() {
      const list = loadJournal().sort((a, b) => a.date.localeCompare(b.date));
      journalList.innerHTML = '';

      if (!list.length) {
        const empty = document.createElement('div');
        empty.textContent = 'ì•„ì§ ê¸°ë¡ì´ ì—†ì–´ìš”. ì²« ê¸°ë¡ì„ ë‚¨ê²¨ë³¼ê¹Œ? âœ¨';
        empty.style.color = 'var(--muted)';
        empty.style.fontSize = '0.8rem';
        journalList.appendChild(empty);
        return;
      }

      list.forEach(item => {
        const div = document.createElement('div');
        div.className = 'journal-item';

        const meta = document.createElement('div');
        meta.className = 'journal-meta';
        meta.innerHTML = `<span>${item.date}</span><span>${item.mood || ''}</span>`;

        const textDiv = document.createElement('div');
        textDiv.textContent = item.text;

        div.appendChild(meta);

        if (item.photos && item.photos.length) {
          const photosDiv = document.createElement('div');
          photosDiv.className = 'journal-photos';
          item.photos.forEach(url => {
            const img = document.createElement('img');
            img.src = url;
            img.alt = 'journal photo';
            photosDiv.appendChild(img);
          });
          div.appendChild(photosDiv);
        }

        div.appendChild(textDiv);
        journalList.appendChild(div);
      });
    }

    journalSaveBtn.addEventListener('click', () => {
      const date = journalDate.value;
      const mood = journalMood.value.trim();
      const text = journalText.value.trim();
      const photos = [journalPhoto1.value, journalPhoto2.value, journalPhoto3.value].filter(Boolean);

      if (!date || !text) {
        alert('ë‚ ì§œì™€ ë‚´ìš©ì„ ì…ë ¥í•´ì¤˜!');
        return;
      }

      const list = loadJournal();
      const existingIndex = list.findIndex(j => j.date === date);
      const item = { date, mood, text, photos };

      if (existingIndex >= 0) {
        list[existingIndex] = item;
      } else {
        list.push(item);
      }

      saveJournal(list);
      renderJournal();
      alert('ê¸°ë¡ ì €ì¥ ì™„ë£Œ âœ¨');
    });

    journalClearBtn.addEventListener('click', () => {
      journalMood.value = '';
      journalPhoto1.value = '';
      journalPhoto2.value = '';
      journalPhoto3.value = '';
      journalText.value = '';
      journalCount.textContent = '0';
    });

    renderJournal();

    // ===== ì²´í¬ë¦¬ìŠ¤íŠ¸ (ì¥ì†Œ) =====
    const placeName = document.getElementById('place-name');
    const placeLink = document.getElementById('place-link');
    const placeAddBtn = document.getElementById('place-add-btn');
    const checklistList = document.getElementById('checklist-list');
    const visitLog = document.getElementById('visit-log');

    function loadPlaces() {
      return loadData('places', []);
    }

    function savePlaces(list) {
      saveData('places', list);
    }

    function loadVisits() {
      return loadData('visits', []);
    }

    function saveVisits(list) {
      saveData('visits', list);
    }

    function renderChecklist() {
      const places = loadPlaces();
      checklistList.innerHTML = '';

      if (!places.length) {
        const empty = document.createElement('div');
        empty.textContent = 'ì•„ì§ ì¶”ê°€í•œ ì¥ì†Œê°€ ì—†ì–´ìš”. ê°€ê³  ì‹¶ì€ ê³³ë¶€í„° ì ì–´ë³¼ê¹Œ? âœ¨';
        empty.style.color = 'var(--muted)';
        empty.style.fontSize = '0.8rem';
        checklistList.appendChild(empty);
        renderVisits();
        return;
      }

      places.forEach((place, index) => {
        const div = document.createElement('div');
        div.className = 'check-item';

        const header = document.createElement('div');
        header.className = 'check-item-header';

        const labelSpan = document.createElement('span');
        labelSpan.className = 'label';
        labelSpan.textContent = place.name;

        const linkBtn = document.createElement('button');
        linkBtn.className = 'btn-text';
        linkBtn.style.fontSize = '0.7rem';
        linkBtn.textContent = 'ì§€ë„ ì—´ê¸°';
        linkBtn.addEventListener('click', () => {
          if (place.link) window.open(place.link, '_blank');
        });

        header.appendChild(labelSpan);
        header.appendChild(linkBtn);

        const sub = document.createElement('div');
        sub.className = 'check-sub';
        sub.textContent = place.link || 'êµ¬ê¸€ë§µ ë§í¬ê°€ ì—†ì–´ìš”. ë‚˜ì¤‘ì— ì¶”ê°€í•´ë„ ë¼!';

        const actions = document.createElement('div');
        actions.className = 'check-actions';

        const visitedBtn = document.createElement('button');
        visitedBtn.textContent = 'ë‹¤ë…€ì™”ì–´ìš”!';
        visitedBtn.addEventListener('click', () => {
          const visits = loadVisits();
          const today = new Date();
          visits.push({
            placeName: place.name,
            date: formatDate(today)
          });
          saveVisits(visits);
          renderVisits();
        });

        const removeBtn = document.createElement('button');
        removeBtn.textContent = 'ì‚­ì œ';
        removeBtn.addEventListener('click', () => {
          const updated = loadPlaces().filter((_, i) => i !== index);
          savePlaces(updated);
          renderChecklist();
        });

        actions.appendChild(visitedBtn);
        actions.appendChild(removeBtn);

        div.appendChild(header);
        div.appendChild(sub);
        div.appendChild(actions);

        checklistList.appendChild(div);
      });

      renderVisits();
    }

    function renderVisits() {
      const visits = loadVisits().sort((a, b) => a.date.localeCompare(b.date));
      visitLog.innerHTML = '';

      if (!visits.length) {
        visitLog.textContent = 'ì•„ì§ ë‹¤ë…€ì˜¨ ê¸°ë¡ì´ ì—†ì–´ìš”. ì²« ì²´í¬ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘ âœ¨';
        return;
      }

      visits.forEach(v => {
        const div = document.createElement('div');
        div.className = 'visit-log-entry';
        div.textContent = `${v.date} - ${v.placeName}`;
        visitLog.appendChild(div);
      });
    }

    placeAddBtn.addEventListener('click', () => {
      const name = placeName.value.trim();
      const link = placeLink.value.trim();

      if (!name) {
        alert('ì¥ì†Œ ì´ë¦„ì„ ì ì–´ì¤˜!');
        return;
      }

      const list = loadPlaces();
      list.push({ name, link });
      savePlaces(list);
      placeName.value = '';
      placeLink.value = '';
      renderChecklist();
    });

    renderChecklist();

    // ===== ë˜ê°„ì§‘ =====
    const togName = document.getElementById('tog-name');
    const togLocation = document.getElementById('tog-location');
    const togNote = document.getElementById('tog-note');
    const togCount = document.getElementById('tog-count');
    const togSaveBtn = document.getElementById('tog-save-btn');
    const togClearBtn = document.getElementById('tog-clear-btn');
    const togList = document.getElementById('tog-list');

    togNote.addEventListener('input', () => {
      togCount.textContent = togNote.value.length;
    });

    function loadToganjip() {
      return loadData('toganjip', []);
    }

    function saveToganjip(list) {
      saveData('toganjip', list);
    }

    function renderToganjip() {
      const list = loadToganjip();
      togList.innerHTML = '';

      if (!list.length) {
        const empty = document.createElement('div');
        empty.textContent = 'ì•„ì§ ë˜ê°„ì§‘ì´ ì—†ì–´ìš”. ì´ë²ˆ ì—¬í–‰ì—ì„œ ì²« ë˜ê°„ì§‘ì„ ë§Œë“¤ì–´ë³´ì! âœ¨';
        empty.style.color = 'var(--muted)';
        empty.style.fontSize = '0.8rem';
        togList.appendChild(empty);
        return;
      }

      list.forEach(item => {
        const div = document.createElement('div');
        div.className = 'toganjip-item';

        const meta = document.createElement('div');
        meta.className = 'toganjip-meta';
        meta.innerHTML = `<span>${item.name} Â· ${item.location}</span><span>${item.date}</span>`;

        const textDiv = document.createElement('div');
        textDiv.textContent = item.note;

        div.appendChild(meta);
        div.appendChild(textDiv);

        togList.appendChild(div);
      });
    }

    togSaveBtn.addEventListener('click', () => {
      const name = togName.value.trim();
      const location = togLocation.value.trim();
      const note = togNote.value.trim();

      if (!name || !note) {
        alert('ì¥ì†Œ ì´ë¦„ê³¼ í›„ê¸°ë¥¼ ì ì–´ì¤˜!');
        return;
      }

      const list = loadToganjip();
      list.push({
        name,
        location,
        note,
        date: formatDate(new Date())
      });

      saveToganjip(list);
      renderToganjip();
      alert('ë˜ê°„ì§‘ ê¸°ë¡ ì €ì¥ ì™„ë£Œ âœ¨');
    });

    togClearBtn.addEventListener('click', () => {
      togName.value = '';
      togLocation.value = '';
      togNote.value = '';
      togCount.textContent = '0';
    });

    renderToganjip();

    // ===== ì¦‰ì„ ê¸°ë¶„ ì±„íŒ…ë°© =====
    const chatJianInput = document.getElementById('chat-jian-input');
    const chatEunInput = document.getElementById('chat-eun-input');
    const chatJianSend = document.getElementById('chat-jian-send');
    const chatEunSend = document.getElementById('chat-eun-send');
    const chatJianCount = document.getElementById('chat-jian-count');
    const chatEunCount = document.getElementById('chat-eun-count');
    const chatJianLog = document.getElementById('chat-jian-log');
    const chatEunLog = document.getElementById('chat-eun-log');

    function loadChat(who) {
      return loadData(`chat-${who}`, []);
    }

    function saveChatList(who, list) {
      saveData(`chat-${who}`, list);
    }

    function getTimeString() {
      const now = new Date();
      const h = String(now.getHours()).padStart(2, '0');
      const m = String(now.getMinutes()).padStart(2, '0');
      return `${h}:${m}`;
    }

    function saveChat(who, text, locationText) {
      const key = who === 'jian' ? 'chat-jian' : 'chat-eun';
      const list = loadData(key, []);
      list.unshift({
        id: Date.now(),
        text,
        date: formatDate(new Date()),
        time: getTimeString(),
        location: locationText || 'ì–´ë”˜ê°€ì—ì„œ'
      });
      saveData(key, list);
    }

    function renderChat() {
      const listJian = loadChat('jian');
      const listEun = loadChat('eun');

      function renderOne(list, container) {
        container.innerHTML = '';
        if (!list.length) {
          const empty = document.createElement('div');
          empty.textContent = 'ì•„ì§ ë©”ì‹œì§€ê°€ ì—†ì–´ìš”. ì²« ê¸°ë¶„ì„ ë‚¨ê²¨ë³¼ê¹Œ? âœ¨';
          empty.style.color = 'var(--muted)';
          empty.style.fontSize = '0.8rem';
          container.appendChild(empty);
          return;
        }

        list.forEach(item => {
          const div = document.createElement('div');
          div.className = 'chat-bubble';
          div.innerHTML = `
            <div class="chat-meta">${item.date} ${item.time} Â· ${item.location}</div>
            <div>${item.text.replace(/\n/g, '<br>')}</div>
          `;
          container.appendChild(div);
        });
      }
      renderOne(listJian, chatJianLog);
      renderOne(listEun, chatEunLog);
    }

    chatJianInput.addEventListener('input', () => {
      chatJianCount.textContent = chatJianInput.value.length;
    });

    chatEunInput.addEventListener('input', () => {
      chatEunCount.textContent = chatEunInput.value.length;
    });

    chatJianSend.addEventListener('click', () => {
      const text = chatJianInput.value.trim();
      if (!text) return;
      if (text.length > 50) {
        alert('50ì ì´ë‚´ë¡œë§Œ ì¨ì¤˜!');
        return;
      }
      saveChat('jian', text, 'ì§€ì•ˆì˜ ìë¦¬');
      chatJianInput.value = '';
      chatJianCount.textContent = '0';
      renderChat();
    });

    chatEunSend.addEventListener('click', () => {
      const text = chatEunInput.value.trim();
      if (!text) return;
      if (text.length > 50) {
        alert('50ì ì´ë‚´ë¡œë§Œ ì¨ì¤˜!');
        return;
      }
      saveChat('eun', text, 'ì€ì„¤ì˜ ìë¦¬');
      chatEunInput.value = '';
      chatEunCount.textContent = '0';
      renderChat();
    });

    renderChat();
  </script>
</body>
</html>
